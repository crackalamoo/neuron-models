<!DOCTYPE html>
<html>
<head>
<title>Cold Porridge</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" >
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<link rel="stylesheet" href="http://harysdalvi.com/main.css">
<script type="text/javascript"
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<!-- <base href="http://harysdalvi.com/sub/projects/porridge/"> -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YPKKGJ4J3K"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){window.dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YPKKGJ4J3K');
</script>
</head>

<body>
<div class="main">

<h1 class="title">Cold Porridge</h1>
<h3 class="author"><a href="http://harysdalvi.com">Harys Dalvi</a></h3>
<h3 class="date">December 2022</h3><br>

<blockquote>
  &ldquo;We are not interested in the fact that the brain has the consistency of cold porridge.&rdquo;<br>
  &emsp; &mdash; Alan Turing
</blockquote>

<h2>Visualization</h2>
<canvas id="artificial"></canvas>
<canvas id="biological"></canvas>


<h2 id="ref">References</h2>
<ol>
<li><a href="https://www.3blue1brown.com/lessons/backpropagation-calculus">Backpropagation calculus</a>
  (Grant Sanderson, 3Blue1Brown) <a href="#src1">^</a></li>
</ol>
<ol type="A">
<li><a href="https://github.com/cazala/mnist">MNIST digits with node.js (github/cazala)</a></li>
</ol>


<div id="footer"></div>
<script src="http://harysdalvi.com/services.js"></script>
<script>
const mnist = <%- JSON.stringify(mnist) %>; // importing MNIST library from node.js

function getMnist(digit, index) {
  return mnist[digit].raw.slice(index*28*28, (index+1)*28*28);
}
function runMnist(digit, index) {
  input = getMnist(digit, index);
  checkANNOutput = digit;
  runANNSample(input);
}
function fastMnist(digit, index) {
  var input = getMnist(digit, index);
  var batch = [[input, digitOutput(digit)]];
  checkANNOutput = digit;
  trainMiniBatch(batch);
}
</script>
<script src="main.js"></script>
<script>
const DARK = darkTheme();

function whenResize() {
  canvas1.width = window.innerWidth*0.8*SCALE;
  canvas1.height = window.innerWidth*0.5*SCALE;
  canvas1.style.width = ''+(window.innerWidth*0.8)+"px";
  canvas1.style.height = ''+(window.innerWidth*0.5)+"px";
  canvas2.width = window.innerWidth*0.8*SCALE;
  canvas2.height = window.innerWidth*0.5*SCALE;
  canvas2.style.width = ''+(window.innerWidth*0.8)+"px";
  canvas2.style.height = ''+(window.innerWidth*0.5)+"px";
}
whenResize();
window.addEventListener("resize", whenResize);

setInterval(drawAnnDiagram, 50);
setInterval(drawBioDiagram, 15);

setAnchors();

const SAMPLES = 850; // max 863

function runEpoch() {
  for (var i = 0; i < SAMPLES; i++) {
    let batch = [];
    for (var j = 0; j <= 9; j++)
      batch.push([getMnist(j, i), digitOutput(j)]);
    trainMiniBatch(batch);
  }
  for (var i = 0; i < art_neurons.length; i++)
    art_neurons[i].reset();
}

function randomMnist(digit=null) {
  if (digit == null)
    digit = Math.floor(Math.random()*10);
  var index = SAMPLES + Math.floor(Math.random()*(mnist[digit].length - SAMPLES));
  runMnist(digit, index);
}
</script>

</body>
</html>
